!function(){var e,t,n=(e=function(e,t){(function(e,n){var r=re.nextTick,i=(Function.prototype.apply,Array.prototype.slice),o={},s=0;function a(e,t){this._id=e,this._clearFn=t}a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.setImmediate="function"==typeof e?e:function(e){var n=s++,a=!(arguments.length<2)&&i.call(arguments,1);return o[n]=!0,r(function(){o[n]&&(a?e.apply(null,a):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof n?n:function(e){delete o[e]}}).call(this,n({}).setImmediate,n({}).clearImmediate)},function(n){return t||e(t={exports:{},parent:n},t.exports),t.exports}),r={};Object.defineProperty(r,"__esModule",{value:!0}),r.mountTo=groundlayer 0;const i={};r.mountTo=function(e){e.realm=i};var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.isEqual=o.RandomID=o.truncateArray=o.createMap=o.has=o.Blank=o.ToKebabCase=groundlayer 0;const s=Object.prototype.hasOwnProperty;function a(){}o.ToKebabCase=function(e){const t=e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,e=>"-"+e.toLowerCase());return e[0]===e[0].toUpperCase()?t.substring(1):t},o.Blank=a,a.prototype=Object.create(null),o.has=function(e,t){return s.call(e,t)},o.createMap=function(){return new a},o.truncateArray=function(e,t){for(;e.length>t;)e.pop()},o.RandomID=function(){return Math.random().toString(36).substr(2,9)},o.isEqual=function(e,t){const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==t[r])return!1}return!0};var u,c={};Object.defineProperty(c,"__esModule",{value:!0}),c.Objects=groundlayer 0,(u=c.Objects||(c.Objects={})).PatchWith=function(e,t,n){e[t]=n},u.GetAttrWith=function(e,t){return e[t]||""},u.isNullOrUndefined=function(e){return null==e},u.isAny=function(e,...t){for(let n of t)if(e===n)return!0;return!1};var l={};function d(e){return 11===e.nodeType||9===e.nodeType}function f(e,t){const n=[];let r=e;for(;r!==t;){const e=r;n.push(e),r=e.parentNode}return n}Object.defineProperty(l,"__esModule",{value:!0}),l.getMatchingNode=l.toDataTransfer=l.toGamepad=l.toTouches=l.toMediaStream=l.toRotationData=l.toMotionData=l.toInputSourceCapability=l.fromFile=l.fromBlob=l.removeFromNode=l.createText=l.createElement=l.recordAttributes=l.getNamespaceForTag=l.applyAttributeTyped=l.applySVGStyles=l.applyStyles=l.applyStyle=l.applySVGStyle=l.setStyleValue=l.applyProp=l.applyAttrs=l.applyAttr=l.getNamespace=l.replaceNodeIf=l.replaceNode=l.insertBefore=l.moveBefore=l.getFocusedPath=l.getActiveElement=l.collectBreadthFirst=l.toHTML=l.eachNodeAndChild=l.nodeListToArray=l.eachChildAndNode=l.reverseApplyEachNode=l.applyEachNode=l.applyEachChildNode=l.applyChildNode=l.findBreadthFirst=l.collectDepthFirst=l.findDepthFirst=l.findNodeWithDepth=l.findNodeWithBreadth=l.collectNodeWithDepth=l.collectNodeWithBreadth=l.reverseFindNodeWithBreadth=l.reverseCollectNodeWithBreadth=l.getAncestry=l.isText=l.isElement=l.isDocumentRoot=l.COMMENT_NODE=l.TEXT_NODE=l.DOCUMENT_NODE=l.DOCUMENT_FRAGMENT_NODE=l.ELEMENT_NODE=groundlayer 0,l.ELEMENT_NODE=1,l.DOCUMENT_FRAGMENT_NODE=11,l.DOCUMENT_NODE=9,l.TEXT_NODE=3,l.COMMENT_NODE=8,o.createMap().style=_,l.isDocumentRoot=d,l.isElement=function(e){return 1===e.nodeType},l.isText=function(e){return 3===e.nodeType},l.getAncestry=f;const h=Node.prototype.getRootNode||function(){let e=this,t=e;for(;e;)t=e,e=e.parentNode;return t};function p(e,t,n){let r=e.firstChild;for(t(r)&&n.push(r);r;)t(r.nextSibling)&&n.push(r),r=r.nextSibling}function m(e,t,n){let r=e.firstChild;for(;r;)t(r)&&n.push(r),r=r.firstChild}function y(e,t){let n=e.firstChild;for(;n;){if(t(n))return n;n=n.nextSibling}return null}function b(e,t){let n=e.firstChild;for(;n;){if(t(n))return n;n=n.firstChild}return null}function v(e){const t=h.call(e);return d(t)?t.activeElement:null}function N(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":groundlayer 0}function g(e,t,n){if(null==n)e.removeAttribute(t);else{const r=N(t);r?e.setAttributeNS(r,t,String(n)):e.setAttribute(t,String(n))}}function E(e,t){for(let n in t)null!=t[n]?e.setAttribute(n,t[n]):e.removeAttribute(n)}function O(e,t,n){e[t]=n}function T(e,t,n){t.indexOf("-")>=0?e.setProperty(t,n):e[t]=n}function _(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";const t=e.style;for(const e in n)o.has(n,e)&&T(t,e,n[e])}}function A(e){if(null==e)return;let t=null;const n=new FileReader;return n.onloadend=function(){t=new Uint8Array(n.result)},n.readAsArrayBuffer(e),t}l.reverseCollectNodeWithBreadth=function(e,t,n){let r=e.lastChild;for(;r;)t(r)&&n.push(r),r=r.previousSibling},l.reverseFindNodeWithBreadth=function(e,t){let n=e.lastChild;for(;n;){if(t(n))return n;n=n.previousSibling}return null},l.collectNodeWithBreadth=p,l.collectNodeWithDepth=m,l.findNodeWithBreadth=y,l.findNodeWithDepth=b,l.findDepthFirst=function(e,t){let n=e.firstChild;for(;n;){const e=b(n,t);if(e)return e;n=n.nextSibling}return null},l.collectDepthFirst=function(e,t,n){let r=e.firstChild;for(;r;)m(r,t,n),r=r.nextSibling},l.findBreadthFirst=function(e,t){let n=e.firstChild;for(;n;){const e=y(n,t);if(e)return e;n=n.firstChild}return null},l.applyChildNode=function(e,t){let n=e.firstChild;for(;n;)t(n),n=n.nextSibling},l.applyEachChildNode=function e(t,n){let r=t.firstChild;for(;r;)n(r),e(r,n),r=r.nextSibling},l.applyEachNode=function e(t,n){n(t);let r=t.firstChild;for(;r;)e(r,n),r=r.nextSibling},l.reverseApplyEachNode=function e(t,n){let r=t.lastChild;for(;r;)e(r,n),n(r),r=r.previousSibling;n(t)},l.eachChildAndNode=function(e,t){const n=e.childNodes;for(let r=0;r<n.length;r++)t(n[r]);t(e)},l.nodeListToArray=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);return t},l.eachNodeAndChild=function(e,t){t(e);const n=e.childNodes;for(let r=0;r<n.length;r++)t(n[r])},l.toHTML=function(e,t){const n=document.createElement("div");return n.appendChild(e.cloneNode(!t)),n.innerHTML},l.collectBreadthFirst=function(e,t,n){let r=e.firstChild;for(;r;)p(r,t,n),r=r.firstChild},l.getActiveElement=v,l.getFocusedPath=function(e,t){const n=v(e);return n&&e.contains(n)?f(n,t):[]},l.moveBefore=function(e,t,n){const r=t.nextSibling;let i=n;for(;null!==i&&i!==t;){const t=i.nextSibling;e.insertBefore(i,r),i=t}},l.insertBefore=function(e,t,n){return null===n?(e.appendChild(t),null):(e.insertBefore(t,n),null)},l.replaceNode=function(e,t,n){return null===n?null:(e.replaceChild(n,t),null)},l.replaceNodeIf=function(e,t){if(null===t)return!1;const n=e.parentNode;return!!n&&(n.replaceChild(t,e),!0)},l.getNamespace=N,l.applyAttr=g,l.applyAttrs=E,l.applyProp=O,l.setStyleValue=T,l.applySVGStyle=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";const t=e.style;for(const e in n)o.has(n,e)&&T(t,e,n[e])}},l.applyStyle=_,l.applyStyles=function(e,t){if("string"==typeof t)e.style.cssText=t;else{e.style.cssText="";const n=e.style;for(const e in t)o.has(t,e)&&T(n,e,t[e])}},l.applySVGStyles=function(e,t){if("string"==typeof t)e.style.cssText=t;else{e.style.cssText="";const n=e.style;for(const e in t)o.has(t,e)&&T(n,e,t[e])}},l.applyAttributeTyped=function(e,t,n){const r=typeof n;"object"===r||"function"===r?O(e,t,n):g(e,t,n)},l.getNamespaceForTag=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/Math/MathML":null==t?null:t.namespaceURI},l.recordAttributes=function(e){const t={},n=e.attributes,r=n.length;if(!r)return t;for(let i=0,o=0;i<r;i+=1,o+=2){const e=n[i];t[e.name]=e.value}return t},l.createElement=function(e,t,n,r,i,o){let s;if("function"==typeof t)return new t;if((o=o.trim()).length>0)switch(t){case"svg":s=e.createElementNS("http://www.w3.org/2000/svg",t);break;case"math":s=e.createElementNS("http://www.w3.org/1998/Math/MathML",t);break;default:s=e.createElementNS(o,t)}else s=e.createElement(t);return s.setAttribute("_key",n),i&&E(s,i),r.length>0&&(s.innerHTML=r),s},l.createText=function(e,t,n){const r=e.createTextNode(t);return c.Objects.PatchWith(r,"key",n),r},l.removeFromNode=function(e,t){const n=e.parentNode;let r=e;for(;r!==t;){const e=r.nextSibling;n.removeChild(r),r=e}},l.fromBlob=function(e){if(null==e)return;let t=null;const n=new FileReader;return n.onloadend=function(){t=new Uint8Array(n.result)},n.readAsArrayBuffer(e),t},l.fromFile=A,l.toInputSourceCapability=function(e){if(null!=e)return{FiresTouchEvent:e.firesTouchEvent}},l.toMotionData=function(e){let t={X:0,Y:0,Z:0};return null==e?t:(t.X=e.x,t.Y=e.y,t.Z=e.z,t)},l.toRotationData=function(e){if(null==e)return;const t={};return t.Alpha=e.alpha,t.Beta=e.beta,t.Gamma=e.gamma,t},l.toMediaStream=function(e){if(null==e)return;const t={Audios:[],Videos:[]};t.Active=e.active,t.Ended=e.ended,t.ID=e.id,t.Audios=[],t.Videos=[];let n=e.getAudioTracks();if(null!=n)for(let i=0;i<n.length;i++){let e=n[i],r=e.getSettings();t.Audios.push({Enabled:e.enabled,ID:e.id,Kind:e.kind,Label:e.label,Muted:e.muted,ReadyState:e.readyState,Remote:e.remote,AudioSettings:{ChannelCount:r.channelCount.Int(),EchoCancellation:r.echoCancellation,Latency:r.latency,SampleRate:r.sampleRate.Int64(),SampleSize:r.sampleSize.Int64(),Volume:r.volume,MediaTrackSettings:{DeviceID:r.deviceId,GroupID:r.groupId}}})}let r=e.getVideoTracks();if(null!=r)for(let i=0;i<r.length;i++){let e=r[i],n=e.getSettings();t.Videos.push({Enabled:e.enabled,ID:e.id,Kind:e.kind,Label:e.label,Muted:e.muted,ReadyState:e.readyState,Remote:e.remote,VideoSettings:{AspectRatio:n.aspectRation,FrameRate:n.frameRate,Height:n.height.Int64(),Width:n.width.Int64(),FacingMode:n.facingMode,MediaTrackSettings:{DeviceID:n.deviceId,GroupID:n.groupId}}})}return t},l.toTouches=function(e){if(null==e)return;const t=[];for(let n=0;n<e.length;n++){let r=e.item(n);t.push({ClientX:r.clientX,ClientY:r.clientY,OffsetX:r.offsetX,OffsetY:r.offsetY,PageX:r.pageX,PageY:r.pageY,ScreenX:r.screenX,ScreenY:r.screenY,Identifier:r.identifier})}return t},l.toGamepad=function(e){let t={};if(null==e)return t;t.DisplayID=e.displayId,t.ID=e.id,t.Index=e.index.Int(),t.Mapping=e.mapping,t.Connected=e.connected,t.Timestamp=e.timestamp,t.Axes=[],t.Buttons=[];let n=e.axes;if(null!=n)for(let i=0;i<n.length;i++)t.Axes.push(n[i]);let r=e.buttons;if(null!=r)for(let i=0;i<r.length;i++){const e=r[i];t.Buttons.push({Value:e.value,Pressed:e.pressed})}return t},l.toDataTransfer=function(e){if(null==e)return;let t={};t.DropEffect=e.dropEffect,t.EffectAllowed=e.effectAllowed,t.Types=e.types,t.Items=[];const n=e.items;if(null!=n)for(let i=0;i<n.length;i++){const e=n.DataTransferItem(i);t.Items.push({Name:e.name,Size:e.size.Int(),Data:A(e)})}t.Files=[];const r=e.files;if(null!=r)for(let i=0;i<r.length;i++){const e=r[i];dFiles.push({Name:e.name,Size:e.size.Int(),Data:A(e)})}return t},l.getMatchingNode=function(e,t){if(!e)return null;if(t(e))return e;for(;e=e.nextSibling;)if(t(e))return e;return null};var w={};function D(e,t,n){const r={children:[],events:[],attrs:[],namespace:""};r.type=e.nodeType,r.name=e.nodeName.toLowerCase(),r.id=c.Objects.GetAttrWith(e,"_id"),r.tid=c.Objects.GetAttrWith(e,"_tid"),r.ref=c.Objects.GetAttrWith(e,"_ref"),r.atid=c.Objects.GetAttrWith(e,"_atid");const i=e;if(null===i)return r;switch(e._tid&&(r.tid=e._tid),e.nodeType){case l.TEXT_NODE:return r.typeName="Text",r.content=e.textContent,r;case l.COMMENT_NODE:return r.typeName="Comment",r.content=e.textContent,r;case l.ELEMENT_NODE:r.typeName="Element",r.children=new Array;break;default:throw new Error(`unable to handle node type ${e.nodeType}`)}if(c.Objects.isNullOrUndefined(i))return""===r.id&&(r.id=o.RandomID()),r;i.hasAttribute("id")?r.id=i.getAttribute("id"):r.id=o.RandomID(),""!==r.ref||c.Objects.isNullOrUndefined(n)||(r.ref=r.id),i.hasAttribute("_ref")?r.ref=i.getAttribute("_ref"):c.Objects.isNullOrUndefined(n)||(""!==n.ref?r.ref=n.ref+"/"+r.id:r.ref=n.id+"/"+r.id),i.hasAttribute("_tid")&&(r.tid=i.getAttribute("_tid")),i.hasAttribute("_atid")&&(r.atid=i.getAttribute("_atid"));for(var s=0;s<i.attributes.length;s++){let e=i.attributes.item(s);if(null==e)continue;if(!e.name.startsWith("event-"))continue;let t=e.name.replace("event-","");r.events.push(S(t,e.value.split("|")))}return t||l.applyChildNode(e,function(e){if(e instanceof Text||e instanceof Comment)return groundlayer r.children.push(D(e,!1,r));const t=e;t.hasAttribute("id")||(t.id=o.RandomID()),r.children.push(D(t,!1,r))}),r}function S(e,t){const n={};return n.Name=e,n.Targets=t,n}function M(e,t){t(e),e.children.forEach(function(e){M(e,t)})}function x(e,t){const n=e.name+"#"+e.id,r=t.querySelectorAll(n);if(0===r.length){let n=e.name+`[_tid='${e.tid}']`,r=t.querySelector(n);return r||(n=e.name+`[_atid='${e.atid}']`,(r=t.querySelector(n))?r:(n=e.name+`[_ref='${e.ref}']`,t.querySelector(n)))}if(1===r.length)return r[0];const i=r.length;for(let o=0;o<i;o++){const t=r.item(o);if(t.getAttribute("_tid")===e.tid)return t;if(t.getAttribute("_atid")===e.atid)return t;if(t.getAttribute("_ref")===e.ref)return t}return null}function C(e,t){const n=e.split("/").map(function(e){return""===e.trim()?"":"#"+e});if(0===n.length)return null;""!==n[0]&&""!==n[0].trim()||n.shift(),n.pop();const r=n[0];t.id==r.substr(1)&&n.shift();let i=t.querySelector(n.shift());for(;i;){if(0===n.length)return i;i=i.querySelector(n.shift())}return i}function P(e,t,n,r){if(t.type===l.COMMENT_NODE){const n=e.createComment(t.content);return c.Objects.PatchWith(n,"_id",t.id),c.Objects.PatchWith(n,"_ref",t.ref),c.Objects.PatchWith(n,"_tid",t.tid),c.Objects.PatchWith(n,"_atid",t.atid),n}if(t.type===l.TEXT_NODE){const n=e.createTextNode(t.content);return c.Objects.PatchWith(n,"_id",t.id),c.Objects.PatchWith(n,"_ref",t.ref),c.Objects.PatchWith(n,"_tid",t.tid),c.Objects.PatchWith(n,"_atid",t.atid),n}let i;return""===t.id&&(t.id=o.RandomID()),i=0!==t.namespace.length?e.createElement(t.name):e.createElementNS(t.namespace,t.name),c.Objects.PatchWith(i,"_id",t.id),c.Objects.PatchWith(i,"_ref",t.ref),c.Objects.PatchWith(i,"_tid",t.tid),c.Objects.PatchWith(i,"_atid",t.atid),i.setAttribute("id",t.id),i.setAttribute("_tid",t.tid),i.setAttribute("_ref",t.ref),i.setAttribute("_atid",t.atid),t.events.forEach(function(e){i.setAttribute("event-"+e.Name,e.Targets.join("|"))}),t.attrs.forEach(function(e){i.setAttribute(e.Key,e.Value)}),t.removed?(i.setAttribute("_removed","true"),i):(n||t.children.forEach(function(t){r&&t.removed||i.appendChild(P(e,t,n,r))}),i)}function j(e,t,n,r){if(!n.Same(t,e)){const n=r.Make(document,e,!1,!0);return groundlayer l.replaceNode(t.parentNode,t,n)}if(!n.Changed(t,e))return;I(e,t);const i=l.nodeListToArray(t.childNodes),o=i.length,s=e.children.length;let a=0;for(;a<o;a++){const t=i[a];if(a>=s){const e=t;e&&e.remove()}else j(e.children[a],t,n,r)}for(;a<s;a++){const n=r.Make(document,e,!1,!0);t.appendChild(n)}}function F(e,t,n,r){if(!n.Same(t,e)){const n=r.Make(document,e,!1,!0);return groundlayer l.replaceNode(t.parentNode,t,n)}n.Changed(t,e)&&I(e,t);const i=t.childNodes.length,o=e.children.length;let s=0;for(;s<i;s++){const i=t.childNodes[s];if(s>=o)return;j(e.children[s],i,n,r)}for(;s<o;s++){const n=r.Make(document,e,!1,!0);t.appendChild(n)}}function I(e,t){const n=l.recordAttributes(t);e.attrs.forEach(function(e){const r=n[e.Key];if(delete n[e.Key],e.Value===r)return null;t.setAttribute(e.Key,e.Value)});for(let r in n)t.removeAttribute(r);t.setAttribute("_tid",e.tid),t.setAttribute("_ref",e.ref),t.setAttribute("_atid",e.atid),e.events.forEach(function(e){t.setAttribute("event-"+e.Name,e.Targets.join("|"))}),c.Objects.PatchWith(t,"_id",e.id),c.Objects.PatchWith(t,"_ref",e.ref),c.Objects.PatchWith(t,"_tid",e.tid),c.Objects.PatchWith(t,"_atid",e.atid)}function R(e,t){const n=l.recordAttributes(t);for(let r in e.attributes){const i=e.attributes[r],o=n[i.name];delete n[i.name],i.value!==o&&t.setAttribute(i.name,i.value)}for(let r in n)t.removeAttribute(r)}Object.defineProperty(w,"__esModule",{value:!0}),w.PatchDOMAttributes=w.PatchDOMTree=w.PatchJSONAttributes=w.PatchTextCommentWithJSON=w.ApplyStreamNode=w.StreamJSONNodes=w.PatchJSONNode=w.PatchJSONNodeTree=w.jsonMaker=w.DefaultJSONMaker=w.findElementParentbyRef=w.findElementbyRef=w.findElement=w.isJSONNode=w.applyJSONNodeKidsFunction=w.applyJSONNodeFunction=w.JSONEvent=w.NodeToJSONNode=w.ToJSONNode=w.DefaultJSONDictator=w.DefaultNodeDictator=groundlayer 0,w.DefaultNodeDictator={Same:(e,t)=>{if(e.nodeType!==t.nodeType||e.nodeName!==t.nodeName)return!1;if(e.nodeType!==l.ELEMENT_NODE)return!0;const n=t;return e.id===n.id},Changed:(e,t)=>{if(e.nodeType===l.TEXT_NODE&&t.nodeType===l.TEXT_NODE)return e.textContent===t.textContent;if(e.nodeType===l.COMMENT_NODE&&t.nodeType===l.COMMENT_NODE)return e.textContent===t.textContent;const n=e,r=t,i=l.recordAttributes(n),o=l.recordAttributes(r);if(!i.hasOwnProperty("_tid")&&o.hasOwnProperty("_tid"))return!0;if(i.hasOwnProperty("_atid"))return!(o._atid===i._tid&&o._tid===o._atid);delete o._atid,delete i._atid,delete o._tid,delete i._tid;for(let s in o){if(!i.hasOwnProperty(s))return!0;if(o[s]!==i[s])return!0}return n.innerHTML!==r.innerHTML}},w.DefaultJSONDictator={Same:(e,t)=>e.nodeType===t.type&&e.nodeName===t.name&&(e.nodeType!==l.ELEMENT_NODE||e.id===t.id),Changed:(e,t)=>{if(e.nodeType===l.TEXT_NODE&&t.type===l.TEXT_NODE)return e.textContent!==t.content;if(e.nodeType===l.COMMENT_NODE&&t.type===l.COMMENT_NODE)return e.textContent!==t.content;const n=e;if(n.hasAttribute("id")&&n.getAttribute("id")!==t.id)return!0;if(n.hasAttribute("_ref")&&n.getAttribute("_ref")!==t.ref)return!0;const r=n.getAttribute("_tid"),i=n.getAttribute("_atid");if(n.hasAttribute("_tid")){if(r!==t.tid)return!0;if(n.hasAttribute("_atid")){if(r!==t.tid&&i!==t.atid)return!0;if(r!==t.tid&&i===t.atid)return!0}}if(!n.hasAttribute("events")&&0!==t.events.length)return!0;for(var o=0;o<t.events.length;o++){let e=t.events[o],r="event-"+e.Name,i=e.Targets.join("|"),s=n.attributes.getNamedItem(r);if(null==s)return!0;if(s.value!=i)return!0}return!0}},w.ToJSONNode=function(e,t,n){const r=new Array;if("string"==typeof e){const i=document.createElement("div");return i.innerHTML=e.trim(),l.applyChildNode(i,function(e){r.push(D(e,t,n))}),r}return r.push(D(e,t,n)),r},w.NodeToJSONNode=D,w.JSONEvent=S,w.applyJSONNodeFunction=M,w.applyJSONNodeKidsFunction=function(e,t){e.children.forEach(function(e){M(e,t)}),t(e)},w.isJSONNode=function(e){const t=groundlayer 0!==e.id,n=groundlayer 0!==e.ref,r=groundlayer 0!==e.tid,i=groundlayer 0!==e.typeName;return t&&n&&i&&r},w.findElement=x,w.findElementbyRef=function(e,t){const n=e.split("/").map(function(e){return""===e.trim()?"":"#"+e});if(0===n.length)return null;""!==n[0]&&""!==n[0].trim()||n.shift();const r=n[0];t.id==r.substr(1)&&n.shift();let i=t.querySelector(n.shift());for(;i;){if(0===n.length)return i;i=i.querySelector(n.shift())}return i},w.findElementParentbyRef=C,w.DefaultJSONMaker={Make:P},w.jsonMaker=P,w.PatchJSONNodeTree=function(e,t,n,r){let i=x(e,t);if(c.Objects.isNullOrUndefined(i)){const n=r.Make(document,e,!1,!0);t.appendChild(n)}else j(e,i,n,r)},w.PatchJSONNode=j,w.StreamJSONNodes=function(e,t,n,r){const i=e.filter(function(e){return!e.removed});e.filter(function(e){if(!e.removed)return!1;let t=!0;return i.forEach(function(n){e.tid!==n.tid&&e.tid!=n.atid&&e.ref!==n.ref||(t=!1)}),t}).forEach(function(e){const n=x(e,t);n&&n.remove()}),i.forEach(function(e){const i=x(e,t);if(c.Objects.isNullOrUndefined(i)){const n=C(e.ref,t);if(c.Objects.isNullOrUndefined(n))return groundlayer console.log("Unable to apply new change stream: ",e);const i=r.Make(document,e,!1,!0);n.appendChild(i)}else F(e,i,n,r)})},w.ApplyStreamNode=F,w.PatchTextCommentWithJSON=function(e,t){e.type!==l.COMMENT_NODE&&e.type!==l.TEXT_NODE||e.type!==l.COMMENT_NODE&&e.type!==l.TEXT_NODE||t.textContent!==e.content&&(t.textContent=e.content,c.Objects.PatchWith(t,"_ref",e.ref),c.Objects.PatchWith(t,"_tid",e.tid),c.Objects.PatchWith(t,"_atid",e.atid))},w.PatchJSONAttributes=I,w.PatchDOMTree=function e(t,n,r,i){if(i){const e=n.parentNode;if(!r.Same(n,t))return l.replaceNode(e,n,t),null;if(!n.hasChildNodes())return l.replaceNode(e,n,t),null}const o=l.nodeListToArray(t.childNodes),s=l.nodeListToArray(n.childNodes),a=s.length,u=o.length,d=u<a;let f,h,p=0,m=null;for(;p<a&&!(p>=u);p++){if(f=s[p],h=o[p],m=f.nextSibling,(f.nodeType===l.TEXT_NODE||f.nodeType===l.COMMENT_NODE)&&h.nodeType===f.nodeType){f.textContent!==h.textContent&&(f.textContent=h.textContent);continue}if(!r.Same(f,h)){l.replaceNode(n,f,h);continue}if(!r.Changed(f,h))continue;if(f.nodeType!==h.nodeType){l.replaceNode(n,f,h);continue}if(!f.hasChildNodes()&&h.hasChildNodes()){l.replaceNode(n,f,h);continue}if(f.hasChildNodes()&&!h.hasChildNodes()){l.replaceNode(n,f,h);continue}const t=f,i=h;R(i,t),t.setAttribute("_patched","true"),e(i,t,r,!0),t.removeAttribute("_patched")}if(d&&null!==m)return l.removeFromNode(m,null),null;for(;p<u;p++){let e=o[p];c.Objects.isNullOrUndefined(e)||n.appendChild(e)}},w.PatchDOMAttributes=R;var B={};Object.defineProperty(B,"__esModule",{value:!0}),B.DOMMount=groundlayer 0;class k{constructor(e,t,n){if("object"!=typeof e)throw new Error("document should be an object");if(this.doc=e,this.notifier=n,this.events={},this.handler=this.handleEvent.bind(this),"string"==typeof t){const e=t,n=this.doc.querySelector(e);if(null==n)throw new Error(`unable to locate node for ${{targetSelector:e}}`);this.mountNode=n}else this.mountNode=t}handleEvent(e){if(!this.events[e.type])return;e.stopPropagation();const t=e.target;if(t.nodeType!==l.ELEMENT_NODE)return;const n=t,r="event-"+o.ToKebabCase(e.type);if(!n.hasAttribute(r))return;const i=n.getAttribute(r);null!=i&&this.notifier&&"function"==typeof this.notifier&&this.notifier(e,i.split("|"),n)}patch(e){this.patchWith(e,w.DefaultNodeDictator,w.DefaultJSONDictator,w.DefaultJSONMaker)}patchWith(e,t,n,r){if(e instanceof DocumentFragment){const n=e;return this.registerNodeEvents(n),groundlayer w.PatchDOMTree(n,this.mountNode,t,!1)}if("string"==typeof e){const n=document.createElement("div");return n.innerHTML=e.trim(),this.registerNodeEvents(n),void w.PatchDOMTree(n,this.mountNode,t,!1)}if(!w.isJSONNode(e))return;const i=e;this.registerJSONNodeEvents(i),w.PatchJSONNodeTree(i,this.mountNode,n,r)}patchList(e){e.forEach(this.patch.bind(this))}stream(e){const t=JSON.parse(e);return this.streamList(t)}streamList(e){this.streamListWith(e,w.DefaultJSONDictator,w.DefaultJSONMaker)}streamListWith(e,t,n){e.forEach(this.registerJSONNodeEvents.bind(this)),w.StreamJSONNodes(e,this.mountNode,w.DefaultJSONDictator,w.DefaultJSONMaker)}registerNodeEvents(e){const t=this;l.applyEachNode(e,function(n){if(n.nodeType!==l.ELEMENT_NODE)return;const r=n.getAttribute("events");r&&r.split(" ").forEach(function(n){const r=n.substr(0,n.length-3);switch(t.registerEvent(r),n.substr(n.length-2,n.length)){case"01":break;case"10":case"11":e.addEventListener(r,k.preventDefault,!1)}})})}registerJSONNodeEvents(e){const t=this;w.applyJSONNodeFunction(e,function(e){e.removed?e.events.forEach(function(e){t.unregisterEvent(e.Name)}):e.events.forEach(function(e){t.registerEvent(e.Name)})})}textContent(){return this.mountNode.textContent}innerHTML(){return this.mountNode.innerHTML.trim()}Html(){return l.toHTML(this.mountNode,!1)}registerEvent(e){this.events[e]||(this.mountNode.addEventListener(e,this.handler,!0),this.events[e]=!0)}unregisterEvent(e){this.events[e]&&(this.mountNode.removeEventListener(e,this.handler,!0),this.events[e]=!1)}static preventDefault(e){e.preventDefault()}static stopPropagation(e){e.stopPropagation()}}B.DOMMount=k;var L={};Object.defineProperty(L,"__esModule",{value:!0}),L.mountTo=void 0;const W=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),c),w),l),B);L.mountTo=function(e){e.markup=W};var q={};Object.defineProperty(q,"__esModule",{value:!0}),q.GetRAF=void 0;const U=self.hasOwnProperty("performance")&&((performance.now?performance.now.bind(performance):null)||(performance.mozNow?performance.mozNow.bind(performance):null)||(performance.msNow?performance.msNow.bind(performance):null)||(performance.oNow?performance.oNow.bind(performance):null)||(performance.webkitNow?performance.webkitNow.bind(performance):null))||Date.now.bind(Date),J=["ms","moz","webkit","o"];q.GetRAF=function(){let e=0;const n={};for(var r=0;r<J.length&&!window.requestAnimationFrame;++r)n.requestAnimationFrame=window[J[r]+"RequestAnimationFrame"],n.cancelAnimationFrame=window[J[r]+"CancelAnimationFrame"]||window[J[r]+"RequestCancelAnimationFrame"];return n.requestAnimationFrame&&n.cancelAnimationFrame||(n.requestAnimationFrame=function(n,r){const i=U(),o=Math.max(0,1e3/60-(i-e)),s=self.setTimeout(function(){try{n(i+o)}catch(t){console.log("Error: ",t),setTimeout(function(){throw t},0)}},o);return e=i+o,s}),n.cancelAnimationFrame||(n.cancelAnimationFrame=function(e){clearTimeout(e)}),n};var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.AFrame=H.AnimationQueue=void 0,H.AnimationQueue=class{constructor(){this.skip=!1,this.binded=!1,this.requestAnimationID=-1,this.frames=new Array,this.bindCycle=this.cycle.bind(this),this.rafProvider=q.GetRAF()}new(){const e=new G(this.frames.length,this);return this.frames.push(e),this.bind(),e}add(e){e.queueIndex=this.frames.length,e.queue=this,this.frames.push(e),this.bind()}resume(){this.skip=!1,this.bind()}pause(){this.skip=!0}unbind(){if(!this.binded)return null;this.rafProvider.cancelAnimationFrame(this.requestAnimationID)}bind(){if(this.binded)return null;this.requestAnimationID=this.rafProvider.requestAnimationFrame(this.bindCycle,null),this.binded=!0}cycle(e){0!==this.frames.length?(this.frames.forEach(function(t){t.paused()||t.animate(e)}),this.bind()):this.binded=!1}};class G{constructor(e,t){this.skip=!1,this.queue=t,this.queueIndex=e,this.callbacks=new Array}add(e){this.callbacks.push(e)}clear(){this.callbacks.length=0}paused(){return this.skip}pause(){this.skip=!0}stop(){if(this.pause(),-1===this.queueIndex)return null;if(0==this.queue.frames.length)return this.queue=void 0,this.queueIndex=-1,null;const e=this.queue.frames.length;if(1==e)return this.queue.frames.pop(),this.queue=void 0,this.queueIndex=-1,null;this.queue.frames[this.queueIndex]=this.queue.frames[e-1],this.queue.frames.length=e-1,this.queue=void 0,this.queueIndex=-1}animate(e){for(let t in this.callbacks)(0,this.callbacks[t])(e)}}H.AFrame=G;var X={};Object.defineProperty(X,"__esModule",{value:!0}),X.mountTo=void 0;const V=Object.assign(Object.assign({},q),H);X.mountTo=function(e){e.animations=V};var K,z={exports:{}};K=function(e){"use strict";var n={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(n.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!=typeof e&&(e=String(e)),e}function a(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function c(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function d(e){var t=new FileReader,n=l(t);return t.readAsArrayBuffer(e),n}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:n.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():n.arrayBuffer&&n.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e,t,n,r=c(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=l(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=o(e),t=s(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},u.prototype.delete=function(e){delete this.map[o(e)]},u.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},u.prototype.set=function(e,t){this.map[o(e)]=s(t)},u.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),a(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),a(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),a(e)},n.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var n,r,i=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),p.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function y(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},h.call(m.prototype),h.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];b.redirect=function(e,t){if(-1===v.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.DOMException=self.DOMException;try{new e.DOMException}catch(g){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function N(t,r){return new Promise(function(i,o){var s=new m(t,r);if(s.signal&&s.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;i(new b(r,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&n.blob&&(a.responseType="blob"),s.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)})}N.polyfill=!0,self.fetch||(self.fetch=N,self.Headers=u,self.Request=m,self.Response=b),e.Headers=u,e.Request=m,e.Response=b,e.fetch=N,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof z.exports?K(z.exports):"function"==typeof define&&define.amd?define(["exports"],K):K(this.WHATWGFetch={}),z=z.exports;var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.DOMException=Y.Response=Y.Request=Y.Headers=Y.fetch=void 0,self.fetch||(self.fetch=Y.fetch.fetch,self.Headers=Y.fetch.Headers,self.Request=Y.fetch.Request,self.Response=Y.fetch.Response,self.DOMException=Y.fetch.DOMException),Y.fetch=self.fetch,Y.Headers=self.Headers,Y.Request=self.Request,Y.Response=self.Response,Y.DOMException=self.DOMException;var $={};Object.defineProperty($,"__esModule",{value:!0}),$.default={};var Z={};Object.defineProperty(Z,"__esModule",{value:!0}),Z.Socket=Z.OneMinute=Z.OneSecond=void 0,Z.OneSecond=1e3,Z.OneMinute=60*Z.OneSecond,Z.Socket=class{constructor(e,t,n,r,i){this.addr=e,this.socket=null,this.reader=t,this.maxWait=i,this.userClosed=!1,this.exponent=n,this.disconnected=!1,this.attemptedConnects=0,this.lastWait=Z.OneSecond,this.maxReconnect=r,this.writeBuffer=new Array}connect(){if(this.socket)return;if(this.attemptedConnects>=this.maxReconnect)return void this.reader.Exhausted(this);const e=new WebSocket(this.addr);e.addEventListener("open",this._opened.bind(this)),e.addEventListener("error",this._errored.bind(this)),e.addEventListener("message",this._messaged.bind(this)),e.addEventListener("close",this._disconnected.bind(this)),this.socket=e,this.disconnected=!1}send(e){this.disconnected?this.writeBuffer.push(e):this.socket.send(e)}reset(){this.attemptedConnects=0,this.lastWait=Z.OneSecond}end(){this.userClosed=!0,this.reader.Closed(this),this.socket.close(),this.socket=null}_disconnected(e){if(this.reader.Disconnected(e,this),this.disconnected=!0,this.socket=null,this.userClosed)return;let t=this.lastWait;this.exponent&&(t=this.exponent(t))>this.maxWait&&(t=this.maxWait),setTimeout(this.connect.bind(this),t),this.attemptedConnects++}_opened(e){for(this.reader.Connected(e,this);this.writeBuffer.length>0;){const e=this.writeBuffer.shift();this.socket.send(e)}}_errored(e){this.reader.Errored(e,this)}_messaged(e){this.reader.Message(e,this)}};var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.mountTo=void 0;const ee=Object.assign(Object.assign(Object.assign({},Y),$),Z);Q.mountTo=function(e){e.http=ee};var te,ne,re={},ie=re={};function oe(){throw new Error("setTimeout has not been defined")}function se(){throw new Error("clearTimeout has not been defined")}function ae(e){if(te===setTimeout)return setTimeout(e,0);if((te===oe||!te)&&setTimeout)return te=setTimeout,setTimeout(e,0);try{return te(e,0)}catch(t){try{return te.call(null,e,0)}catch(t){return te.call(this,e,0)}}}!function(){try{te="function"==typeof setTimeout?setTimeout:oe}catch(t){te=oe}try{ne="function"==typeof clearTimeout?clearTimeout:se}catch(t){ne=se}}();var ue,ce=[],le=!1,de=-1;function fe(){le&&ue&&(le=!1,ue.length?ce=ue.concat(ce):de=-1,ce.length&&he())}function he(){if(!le){var e=ae(fe);le=!0;for(var n=ce.length;n;){for(ue=ce,ce=[];++de<n;)ue&&ue[de].run();de=-1,n=ce.length}ue=null,le=!1,function(e){if(ne===clearTimeout)return clearTimeout(e);if((ne===se||!ne)&&clearTimeout)return ne=clearTimeout,clearTimeout(e);try{ne(e)}catch(t){try{return ne.call(null,e)}catch(t){return ne.call(this,e)}}}(e)}}function pe(e,t){this.fun=e,this.array=t}function me(){}ie.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ce.push(new pe(e,t)),1!==ce.length||le||ae(he)},pe.prototype.run=function(){this.fun.apply(null,this.array)},ie.title="browser",ie.browser=!0,ie.env={},ie.argv=[],ie.version="",ie.versions={},ie.on=me,ie.addListener=me,ie.once=me,ie.off=me,ie.removeListener=me,ie.removeAllListeners=me,ie.emit=me,ie.prependListener=me,ie.prependOnceListener=me,ie.listeners=function(e){return[]},ie.binding=function(e){throw new Error("process.binding is not supported")},ie.cwd=function(){return"/"},ie.chdir=function(e){throw new Error("process.chdir is not supported")},ie.umask=function(){return 0};var ye={};(function(e){"use strict";var n=setTimeout;function r(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var r=1===e._state?n.onFulfilled:n.onRejected;if(null!==r){var i;try{i=r(e._value)}catch(t){return void a(n.promise,t)}s(n.promise,i)}else(1===e._state?s:a)(n.promise,e._value)})):e._deferreds.push(n)}function s(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var r=n.then;if(n instanceof i)return e._state=3,e._value=n,void u(e);if("function"==typeof r)return void l((o=r,s=n,function(){o.apply(s,arguments)}),e)}e._state=1,e._value=n,u(e)}catch(t){a(e,t)}var o,s}function a(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,a(t,e))})}catch(r){if(n)return;n=!0,a(t,r)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new c(e,t,n)),n},i.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},i.all=function(e){return new i(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){o(e,t)},n)}r[e]=s,0==--i&&t(r)}catch(u){n(u)}}for(var s=0;s<r.length;s++)o(s,r[s])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},i._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){n(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},ye=i}).call(this,n({}).setImmediate);var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.mountTo=void 0,self.Promise||(self.Promise=ye);const ve=self.Promise;be.mountTo=function(e){e.promises=ve};var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});const ge={realm:{},animations:{},http:{},promises:{},markup:{}};r.mountTo(ge),L.mountTo(ge),X.mountTo(ge),Q.mountTo(ge),be.mountTo(ge),window&&(window.voidgram=ge),Ne.default=ge}();